!function(a,b){typeof exports==='object'&&typeof module!=='undefined'?module.exports=b():typeof define==='function'&&define.amd?define(b):(a.Emitry=b())}(this,(function(){'use strict';var a=function a(){this.list=Object.create(null)};a.prototype.has=function b(a){return~Object.keys(this.list).indexOf(a)};a.prototype.isArray=function b(a){return Object.prototype.toString.call(a)==='[object Array]'};a.prototype.emit=function b(a){var c=this,d=[],e=arguments.length-1;while(e-->0)d[e]=arguments[e+1];if(this.list[a]){for(var f=0;f<this.list[a].length;f++){var g=c.list[a][f];g.callback.apply(g,d);g.once&&c.list[a].splice(f--,1)}this.list[a]&&this.list[a].length===0&&delete this.list[a]}};a.prototype.on=function c(a,b){this.has(a)||(this.list[a]=[]);this.list[a].push({callback:b})};a.prototype.once=function c(a,b){this.has(a)||(this.list[a]=[]);this.list[a].push({once:!0,callback:b})};a.prototype.off=function c(a,b){var d=this;if(this.isArray(a))a.forEach(function(a){return delete d.list[a]});else if(typeof a==='string'&&typeof b==='function'){if(this.has(a)){var e=this.list[a].findIndex(function(a){return a.callback===b});~e&&this.list[a].splice(e,1)}}else this.list=Object.create(null)};return a}))
